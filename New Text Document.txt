//let temp = msg.payload.อุณหภูมิ; 
let humid = msg.payload.ความชื้น; 
let device_id = 1; 
msg.topic = `INSERT INTO reading_logs  
(device_id, temperature_c, humidity_pct)  
VALUES  
(${device_id}, ${temp}, ${humid})`; 
return msg; 

//let temp = msg.payload.อุณหภูมิ; 
let humid = msg.payload.ความชื้น; 
let device_id = 1; 
let jsDate = new Date(); 
let mysqlDateTime = jsDate.toISOString().slice(0, 19).replace('T', ' '); 
msg.topic = `INSERT INTO device_state  
               (device_id, temperature_c, humidity_pct, updated_at) 
             VALUES  
               (${device_id}, ${temp}, ${humid}, '${mysqlDateTime}') 
             ON DUPLICATE KEY UPDATE 
               temperature_c = ${temp}, 
               humidity_pct = ${humid}, 
               updated_at = '${mysqlDateTime}'`; 
return msg; 